(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("8a23"),n=a.n(r);n.a},"0e44":function(e,t,a){e.exports=a.p+"img/industry.17a792c6.svg"},"234f":function(e,t,a){e.exports=a.p+"img/lightbulb-solid.723591c6.svg"},"2d19":function(e,t,a){e.exports=a.p+"img/tint-solid.8b0d5b3a.svg"},"56ba":function(e,t,a){e.exports=a.p+"img/temperature-high-solid.9980b42a.svg"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.page.search,expression:"page.search"}],staticClass:"mx-auto",staticStyle:{"max-width":"800px"}},[a("ShowMachine",{staticClass:"mt-5"}),a("ShowOrder",{staticClass:"mt-8"}),a("ShowSensorCard",{staticClass:"mt-5"})],1),e.page.agv.display?a("ShowAgv",{attrs:{agv:e.page.agv.name}}):e._e(),a("FlatActionButton")],1)],1)},s=[],o=(a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("h2",[e._v("查詢訂單")]),a("v-spacer"),a("v-text-field",{attrs:{label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"id",headers:e.headers,items:e.orders,search:e.search},scopedSlots:e._u([{key:"item.action",fn:function(e){var t=e.item;return[a("EditOrderButton",{attrs:{orderInfo:t}})]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"test",attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({staticClass:"mr-2",attrs:{small:""}},r),[e._v("mdi-brush")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline",staticStyle:{"font-family":"微軟正黑體!important"}},[e._v("編輯訂單")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"orderForm"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"訂單編號",required:"",rules:[function(e){return!!e||"This term is required"}]},model:{value:e.orderInfo.orderName,callback:function(t){e.$set(e.orderInfo,"orderName",t)},expression:"orderInfo.orderName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"客戶名稱",required:"",rules:[function(e){return!!e||"This term is required"}]},model:{value:e.orderInfo.customer,callback:function(t){e.$set(e.orderInfo,"customer",t)},expression:"orderInfo.customer"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.formSelect.status,label:"訂單狀態",rules:[function(e){return!!e||"This term is required"}],required:""},model:{value:e.orderInfo.status,callback:function(t){e.$set(e.orderInfo,"status",t)},expression:"orderInfo.status"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.formSelect.machines,label:"負責機器",rules:[function(e){return!!e||"This term is required"}],required:""},model:{value:e.orderInfo.machine,callback:function(t){e.$set(e.orderInfo,"machine",t)},expression:"orderInfo.machine"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"300px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"完成日期",readonly:"",required:"",rules:[function(e){return!!e||"This term is required"}]},model:{value:e.orderInfo.completeDate,callback:function(t){e.$set(e.orderInfo,"completeDate",t)},expression:"orderInfo.completeDate"}},r))]}}])},[a("v-date-picker",{ref:"picker",attrs:{min:"1999-01-01"},on:{change:e.saveDate},model:{value:e.orderInfo.completeDate,callback:function(t){e.$set(e.orderInfo,"completeDate",t)},expression:"orderInfo.completeDate"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrderInfo}},[e._v("確認")]),a("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("取消")])],1)],1)],1)},l=[],u=a("0ff2"),d=a("59ca"),f=a.n(d);a("66ce");r["default"].use(u["a"]);var m={apiKey:"AIzaSyCVAnHG8gArEKg6Fsha1lOzDOEak5hX2s0",authDomain:"factory-coding101.firebaseio.com/",databaseURL:"https://coding101-2c8e8.firebaseio.com",projectId:"coding101-a8967",storageBucket:"coding101-a8967.appspot.com",messagingSenderId:"107632168451",appId:"1:107632168451:web:15ed5fabcc3d6a748a4836",measurementId:"G-YZHT43H113"},v=f.a.initializeApp(m).database(),p={data:function(){return{dialog:!1,formSelect:{machines:["M01","M02","M03","M04","M05"],status:["未處理","已處理","處理中"]}}},props:["orderInfo"],methods:{saveDate:function(e){this.$refs.menu.save(e)},updateOrderInfo:function(){this.$refs.orderForm.validate()&&(this.snackbar=!0,v.ref("orders/"+this.orderInfo.id).update(this.orderInfo),this.dialog=!1)}}},h=p,g=a("2877"),b=a("6544"),x=a.n(b),_=a("8336"),y=a("b0af"),C=a("99d9"),k=a("62ad"),S=a("a523"),V=a("2e4b"),w=a("169a"),I=a("4bd4"),O=a("132d"),D=a("e449"),M=a("0fd9"),T=a("b974"),$=a("2fa4"),q=a("8654"),j=Object(g["a"])(h,c,l,!1,null,null,null),A=j.exports;x()(j,{VBtn:_["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VCol:k["a"],VContainer:S["a"],VDatePicker:V["a"],VDialog:w["a"],VForm:I["a"],VIcon:O["a"],VMenu:D["a"],VRow:M["a"],VSelect:T["a"],VSpacer:$["a"],VTextField:q["a"]});var P={data:function(){return{headers:[{text:"訂單編號",value:"orderName"},{text:"客戶名稱",value:"customer"},{text:"訂單狀態",value:"status"},{text:"負責機器",value:"machine"},{text:"完成日期",value:"completeDate"},{text:"編輯",value:"action",sortable:!1}],search:"",selected:[],orders:[]}},components:{EditOrderButton:A},firebase:function(){return{orders:v.ref("/orders")}}},E=P,N=a("8fea"),F=Object(g["a"])(E,o,i,!1,null,null,null),B=F.exports;x()(F,{VCard:y["a"],VCardTitle:C["c"],VDataTable:N["a"],VSpacer:$["a"],VTextField:q["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("h2",[e._v("查詢機台")])]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.machines,search:e.search},scopedSlots:e._u([{key:"item.status",fn:function(t){var r=t.item;return[a("v-chip",{attrs:{color:e.getColor(r.status),dark:""}},[e._v(e._s(r.status))])]}}])})],1)},G=[],R={data:function(){return{headers:[{text:"機台編號",value:"id"},{text:"機台狀態",value:"status"},{text:"處理訂單",value:"orderHanding"}],machines:[],search:""}},methods:{getColor:function(e){return"online"==e?"green":"offline"==e?"red":void 0}},firebase:function(){return{machines:v.ref("/machines")}}},H=R,L=a("cc20"),J=Object(g["a"])(H,z,G,!1,null,null,null),K=J.exports;x()(J,{VCard:y["a"],VCardTitle:C["c"],VChip:L["a"],VDataTable:N["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",e._l(e.sensors,(function(e,t){return a("v-col",{key:"sensor"+t,attrs:{cols:"12",sm:"6",md:"4"}},[a("SensorCard",{attrs:{sensor:e}})],1)})),1)},U=[],X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"pa-5"},[a("v-card-text",{staticClass:"text-center"},[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.sensor.path}}),a("h1",{staticClass:"text-center my-5"},[e._v(e._s(e.sensor.name))]),a("div",{staticClass:"pb-0 title"},[e._v(e._s(e.getSensorsData)+" "+e._s(e.sensor.unit))])])],1)},Y=[],Z=(a("b680"),{data:function(){return{sensorData:[]}},props:{sensor:{required:!0,type:Object}},computed:{getSensorsData:function(){return console.log(this.sensorData),0==this.sensorData.length?"":this.sensorData[0].data.toFixed(3)}},firebase:function(){return{sensorData:v.ref("/sensor/".concat(this.sensor.queryName)).limitToLast(1)}}}),W=Z,ee=Object(g["a"])(W,X,Y,!1,null,null,null),te=ee.exports;x()(ee,{VCard:y["a"],VCardText:C["b"]});var ae={components:{SensorCard:te},data:function(){return{sensors:[{name:"PM 2.5",queryName:"g3_25",path:a("0e44"),unit:"μg/m3"},{name:"PM 10",queryName:"g3_10",path:a("0e44"),unit:"μg/m3"},{name:"濕度",queryName:"humidity",path:a("2d19"),unit:"%"},{name:"亮度",queryName:"photoresistance",path:a("234f"),unit:"cd/m2"},{name:"溫度",queryName:"temperature",path:a("56ba"),unit:"℃"}]}}},re=ae,ne=Object(g["a"])(re,Q,U,!1,null,null,null),se=ne.exports;x()(ne,{VCol:k["a"],VRow:M["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-speed-dial",{staticClass:"text-right",attrs:{fixed:"",top:"",right:"",direction:"bottom",transition:"slide-y-reverse-transition"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-btn",{staticClass:"v-btn--example",attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?a("v-icon",[e._v("mdi-close")]):a("v-icon",[e._v("mdi-swap-horizontal")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"teal lighten-2"},on:{click:function(t){return e.changePage("data")}}},[a("v-icon",[e._v("mdi-feature-search-outline")])],1),e._l(e.btns,(function(t,r){return a("v-btn",{key:"btn-"+r,attrs:{fab:"",dark:"",small:"",color:t.color},on:{"~click":function(a){return e.changePage(t.name)}}},[e._v(" "+e._s(t.name)+" ")])}))],2)},ie=[],ce=new r["default"],le=ce,ue={data:function(){return{fab:!1,fling:!1,tabs:null,btns:[{name:"AGV1",color:"blue darken-1"},{name:"AGV2",color:"red darken-1"},{name:"AGV3",color:"indigo darken-1"},{name:"AGV4",color:"green darken-1"}]}},methods:{changePage:function(e){le.$emit("changePage",e.toLowerCase())}}},de=ue,fe=a("c73b"),me=Object(g["a"])(de,oe,ie,!1,null,null,null),ve=me.exports;x()(me,{VBtn:_["a"],VIcon:O["a"],VSpeedDial:fe["a"]});var pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"channel-container"}},[a("div",{staticClass:"channel"},[a("vue-scroll",{ref:"vs",on:{"handle-resize":e.handleResize}},[e._l(e.messages,(function(t,r){return a("div",{key:r,staticClass:"white--text mb-4"},[t.content?a("div",[a("div",{staticClass:"d-flex align-center"},[a("span",{staticClass:"title mx-2 mt-2"},[e._v(" "+e._s(t.name)+" "),a("div",[a("span",{staticClass:"grey--text caption",staticStyle:{position:"relative",bottom:"10px"}},[e._v(e._s(t.time))])])]),a("span",{staticClass:"content"},[e._v(e._s(t.content))])])]):e._e(),t.text?a("div",[a("div",{staticClass:"d-flex justify-end align-center"},[a("span",{staticClass:"content"},[e._v(e._s(t.text))]),a("span",{staticClass:"title mr-3 mt-2 text-end"},[e._v(" "+e._s(t.name)+" "),a("div",[a("span",{staticClass:"grey--text caption",staticStyle:{position:"relative",bottom:"10px"}},[e._v(e._s(t.time))])])])])]):e._e()])})),a("div",{attrs:{id:"bottom"}})],2),a("v-form",{ref:"form",staticClass:"instruction-form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{staticClass:"ml-auto",staticStyle:{width:"90%"},attrs:{required:"",label:"Name",rules:[function(e){return!!e||"Name is required"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-select",{staticClass:"ml-auto",staticStyle:{width:"90%"},attrs:{items:e.instructionSelects,label:"Instruction",required:"",rules:[function(e){return!!e||"Item is required"}]},model:{value:e.instruction,callback:function(t){e.instruction=t},expression:"instruction"}})],1),a("v-col",{staticClass:"d-flex justify-center align-center"},[a("v-btn",{attrs:{color:"primary"},on:{click:e.sendData}},[e._v("送出訊息")])],1)],1)],1)],1)])},he=[],ge=(a("b0c0"),{data:function(){return{name:"",messages:[],valid:!0,instruction:"",instructionSelects:["啟動","暫停","卸載","到站 A","到站 B","到站 C","到站 D","到站 E","到站 F"],lastMessage:[]}},props:{agv:{type:String,required:!0}},created:function(){this.getMessages()},watch:{agv:function(){this.messages=[],this.getMessages()},lastMessage:function(){void 0!=this.lastMessage[0]&&this.messages.push(this.lastMessage[0])}},methods:{sendData:function(){if(this.$refs.form.validate()){var e={name:this.name,text:this.instruction,time:this.getTime()};v.ref("/chatbot/".concat(this.agv)).push(e),this.$refs.form.reset()}},handleResize:function(){this.$refs.vs.scrollBy({dy:9e5},500,"easeInQuad")},getTime:function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return t<10&&(t="0"+t),a<10&&(a="0"+a),r<10&&(r="0"+r),t+":"+a+":"+r},getMessages:function(){var e=this;v.ref("/chatbot/".concat(this.agv)).once("value",(function(t){var a=t.val();e.parserMessages(a),e.$refs["vs"].scrollTo({y:9e4})}))},parserMessages:function(e){for(var t in e){var a={text:e[t].text,content:e[t].content,name:e[t].name,time:e[t].time};this.messages.push(a)}}},firebase:function(){return{lastMessage:v.ref("/chatbot/".concat(this.agv)).limitToLast(1)}}}),be=ge,xe=(a("c06e"),Object(g["a"])(be,pe,he,!1,null,"5f9b5d70",null)),_e=xe.exports;x()(xe,{VBtn:_["a"],VCol:k["a"],VForm:I["a"],VRow:M["a"],VSelect:T["a"],VTextField:q["a"]});var ye={data:function(){return{page:{agv:{display:!1,name:""},search:!0}}},components:{ShowOrder:B,ShowMachine:K,ShowSensorCard:se,FlatActionButton:ve,ShowAgv:_e},mounted:function(){var e=this;le.$on("changePage",(function(t){-1!=t.search("agv")?(e.page.search=!1,e.page.agv={display:!0,name:t}):(e.page.search=!0,e.page.agv.display=!1)}))}},Ce=ye,ke=(a("034f"),a("7496")),Se=Object(g["a"])(Ce,n,s,!1,null,null,null),Ve=Se.exports;x()(Se,{VApp:ke["a"],VContainer:S["a"]});var we=a("f309");r["default"].use(we["a"]);var Ie=new we["a"]({iconfont:"mdiSvg"}),Oe=a("bc3a"),De=a.n(Oe),Me=a("a7fe"),Te=a.n(Me),$e=a("77a0"),qe=a.n($e);r["default"].config.productionTip=!1,r["default"].use(Te.a,De.a),r["default"].use(qe.a),new r["default"]({vuetify:Ie,render:function(e){return e(Ve)}}).$mount("#app")},"581c":function(e,t,a){},"8a23":function(e,t,a){},c06e:function(e,t,a){"use strict";var r=a("581c"),n=a.n(r);n.a}});
//# sourceMappingURL=app.7a128b07.js.map